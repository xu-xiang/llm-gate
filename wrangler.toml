name = "llm-gate"
main = "src/index.ts"
compatibility_date = "2024-02-05"
compatibility_flags = ["nodejs_compat"]

[[kv_namespaces]]
binding = "AUTH_STORE"
# 必须保留 id 字段以通过 wrangler 校验。
# 线上会自动使用你在 Cloudflare 控制台 Settings -> Bindings 中手动关联的真实 ID。
id = "f02f525d1f1e4f129183858979a6fc22" 

[[d1_databases]]
binding = "DB"
database_name = "llm-gate-db"
database_id = "092a81ac-7bbc-4cc4-8d34-392c267b1401" 

[vars]
# [移除] API_KEY = "" 
# 彻底移除此行，防止覆盖 Dashboard 中的配置。
# 请务必在 Cloudflare 后台配置 API_KEY。

LOG_LEVEL = "INFO"
CHAT_DAILY_LIMIT = "2000"
CHAT_RPM_LIMIT = "60"
PROVIDER_SCAN_SECONDS = "60"
PROVIDER_FULL_KV_SCAN_MINUTES = "30"
